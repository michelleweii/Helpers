# lista = [
#     [[43, 862], [245, 908]],
#         [[44, 420], [245, 474]],
#         [[43, 421], [245, 474]],
#         [[493, 191], [694, 245]],
#         [[44, 193], [235, 234]],
#         [[44, 636], [231, 683]],
#         [[44, 699], [235, 746]],
#         [[44, 464], [229, 520]]
# ]

# print(sorted(lista[0]))

# for rect in lista:
    # print(rect)
#     lista.append(sorted(rect[0][0]))
# lista.sort(key=lambda x:x[0])
# print(lista)
# [[[43, 862], [245, 908]], [[44, 193], [235, 234]], [[44, 420],
# [245, 474]], [[44, 464], [229, 520]], [[44, 636], [231, 683]],
# [[44, 699], [235, 746]], [[493, 191], [694, 245]]]
# lista.sort(key=lambda x:[x[0][0]])
# print(lista)
# [[[43, 862], [245, 908]], [[44, 420], [245, 474]],
# [[44, 193], [235, 234]], [[44, 636], [231, 683]],
# [[44, 699], [235, 746]], [[44, 464], [229, 520]], [[493, 191], [694, 245]]]
# lista.sort(key=lambda x:[x[0][1]])
# print(lista)
# [[493, 191], [694, 245]], [[44, 193], [235, 234]],
# [[44, 420], [245, 474]], [[44, 464], [229, 520]],
# [[44, 636], [231, 683]], [[44, 699], [235, 746]], [[43, 862], [245, 908]]]
# lista.sort(key=lambda x:x[x[0][0]+x[0][1]])
# print(lista)
# def sort_rect1(lista):
#     new_rect = []
#     tmp_rect = []
#
#     for _, rect in enumerate(lista):
#         # print(rect[0])
#         # print(sum(rect[0]))
#         key = sum(rect[0])
#         tmp_rect.append([key,rect])
#     print(tmp_rect)
#
#     tmp_rect.sort(key=lambda x: x[0])
#     # tmp_rect = sorted(tmp_rect.items(), key=lambda d:d[0])
#     print("-----")
#     print(tmp_rect)
#
#     for item in range(len(tmp_rect)-1):
#         # print(tmp_rect[item]) # [237, [[44, 193], [235, 234]]]
#         if tmp_rect[item][0] == tmp_rect[item+1][0]:
#             # print('aaaa')
#             rect1 =  tmp_rect[item][1]
#             # print(rect1) # [[44, 420], [245, 474]]
#             rect2= tmp_rect[item+1][1]
#             if abs(rect1[0][0]-rect2[0][0]) < 5:
#                 if rect1[0][1]<rect2[0][1]:
#                     new_rect.append(rect1)
#                 else:
#                     new_rect.append(rect2)
#         # if item
#         else:
#             new_rect.append(tmp_rect[item][1])
#     return new_rect
from functools import cmp_to_key
lista = [[[43, 862], [245, 908]], [[44, 420], [245, 474]], [[493, 191], [694, 245]], [[44, 193], [235, 234]], [[44, 636], [231, 683]], [[44, 699], [235, 746]], [[44, 464], [229, 520]], [[41, 977], [243, 1027]], [[44, 914], [228, 960]], [[491, 645], [684, 680]], [[45, 253], [245, 293]], [[491, 871], [683, 900]], [[45, 298], [236, 344]], [[493, 23], [692, 74]], [[492, 477], [706, 515]], [[491, 1090], [677, 1122]], [[940, 868], [1155, 899]], [[492, 759], [690, 789]], [[44, 525], [243, 577]], [[44, 139], [323, 183]], [[44, 82], [243, 127]], [[44, 24], [243, 66]], [[941, 427], [1140, 456]], [[940, 1092], [1139, 1121]], [[492, 527], [706, 582]], [[491, 253], [692, 291]], [[42, 581], [243, 625]], [[354, 411], [684, 471]], [[42, 806], [242, 853]], [[940, 650], [1140, 678]], [[491, 83], [677, 133]], [[941, 204], [1133, 232]], [[941, 538], [1155, 568]], [[491, 980], [677, 1011]], [[941, 314], [1155, 344]], [[493, 143], [677, 194]], [[44, 740], [242, 800]], [[493, 294], [792, 359]], [[490, 585], [692, 630]], [[940, 979], [1126, 1010]], [[942, 759], [1140, 788]], [[941, 92], [1140, 123]], [[940, 483], [1125, 512]], [[43, 364], [243, 406]], [[492, 705], [691, 733]], [[941, 260], [1125, 288]], [[493, 926], [676, 957]], [[940, 926], [1124, 955]], [[941, 371], [1125, 405]], [[492, 815], [693, 844]], [[491, 1037], [683, 1066]], [[940, 815], [1131, 845]], [[941, 149], [1125, 177]], [[940, 704], [1140, 732]], [[942, 34], [1140, 65]], [[940, 1035], [1141, 1066]], [[940, 594], [1140, 622]], [[492, 364], [694, 401]], [[43, 1088], [227, 1139]], [[43, 1024], [227, 1069]]]

def cmp_center(x,y):
    return x[2][1]-y[2][1]
def cmp_x(x,y):
    return x[2][0]-y[2][0]
def cmp_y(x,y):
    # if x[0][0]==y[0][0]:
    return x[2][1]-y[2][1]
    # else:
    #     return 1
def sort_rect(lista):
    maxheight = 0
    for item in lista:
        # print(item) # [[43, 862], [245, 908]]
        y = (item[1][1]+item[0][1])//2
        x = (item[1][0]+item[0][0])//2
        height = item[1][1]-item[0][1]
        maxheight = max(maxheight,height)
        item.append([x,y])
    maxheight = maxheight//2
    # print(maxheight)
    lista.sort(key=cmp_to_key(cmp_center))
    # print(lista)
    row = []
    for i in range(len(lista)):
        row.append(lista[i:i+3])
    # print(row) # 按行匹配完成
    for i in row:
        i.sort(key=cmp_to_key(cmp_x))
    # print(row)
    for i in row:
        i.sort(key=cmp_to_key(cmp_y))
    # print(row)

# 合并回三维
    new_rect = []
    for i in row:
        for j in i:
            # print(j[:2])
            new_rect.append(j[:2])
    print(new_rect)
    return new_rect

sort_rect(lista)


def cmp1(x,y):
    if x[0][0]==y[0][0]:
        return x[0][1]-y[0][1]
    else:
        return 1

def cmp2(x,y):
    return sum(x[0])-sum(y[0])


def sort_rect1(lista):
    new_rect = []
    min_val = 0
    min_idx = 0
    tmp_rect = []
    lista.sort(key=lambda x: x[0][0])
    # print(lista[0][0])
    # [[43, 862], [245, 908]]
    # [[44, 420], [245, 474]]
    # [[43, 421], [245, 474]]
    # [[493, 191], [694, 245]]
    # [[44, 193], [235, 234]]
    # [[44, 636], [231, 683]]
    # [[44, 699], [235, 746]]
    # [[44, 464], [229, 520]]
# print(lista) # 按照x方向排序
#     [[[43, 862], [245, 908]],
#     [[43, 421], [245, 474]],
#     [[44, 420], [245, 474]],
#     [[44, 193], [235, 234]],
#     [[44, 636], [231, 683]],
#     [[44, 699], [235, 746]],
#     [[44, 464], [229, 520]],
#     [[493, 191], [694, 245]]]
#     lista.sort(key=lambda x: x[0][1]) # 按照y轴再排序会gg
    # [[[493, 191], [694, 245]],
    # [[44, 193], [235, 234]],
    # [[44, 420], [245, 474]],
    # [[43, 421], [245, 474]],
    # [[44, 464], [229, 520]],
    # [[44, 636], [231, 683]],
    # [[44, 699], [235, 746]],
    # [[43, 862], [245, 908]]]
    # print(lista)
    lista = sorted(lista,key=cmp_to_key(cmp2))
    # [[[44, 193], [235, 234]],
    # [[43, 421], [245, 474]],
    # [[44, 420], [245, 474]],
    # [[44, 464], [229, 520]],
    # [[44, 636], [231, 683]],
    # [[493, 191], [694, 245]],
    # [[44, 699], [235, 746]],
    # [[43, 862], [245, 908]]]
    # print(lista)
    lista = sorted(lista,key=cmp_to_key(cmp1))
    return lista
# [[[44, 193], [235, 234]],
# [[43, 421], [245, 474]],
# [[44, 420], [245, 474]],
# [[44, 464], [229, 520]],
# [[44, 636], [231, 683]],
# [[493, 191], [694, 245]],
# [[44, 699], [235, 746]],
# [[43, 862], [245, 908]]]


a = [[2,'a'],[1,'b']]
a.sort(key=lambda x:x[0])
# print(a)